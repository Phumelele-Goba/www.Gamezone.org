let items = [
  {
    name: "XBox 360",
    tag: "xbox360",
    price: 1000,
    inlikes: 0,
  },

  {
    name: "ps5Console",
    tag: "ps5console",
    price: 800,
    inlikes: 0,
  },
  {
    name: "Tomb Raider PS4",
    tag: "tombraiderps4",
    price: 400,
    inlikes: 0,
  },
  {
    name: "FC 2024",
    tag: "fc2024",
    price: 1900,
    inlikes: 0,
  },
  {
    name: "Batman PS4",
    tag: "batmanps4",
    price: 900,
    inlikes: 0,
  },

  {
    name: "DG Ball Xenoverse",
    tag: "dgballxenoverse",
    price: 600,
    inlikes: 0,
  },

  {
    name: "Camo Console PS5",
    tag: "camoconsoleps5",
    price: 900,
    inlikes: 0,
  },

  {
    name: "Call of Duty PS4",
    tag: "callofdutyps4",
    price: 1000,
    inlikes: 0,
  },
  {
    name: "Fifa 17 PS4",
    tag: "fifa17ps4",
    price: 250,
    inlikes: 0,
  },
  {
    name: "Gaming Chair",
    tag: "gamingchair",
    price: 2500,
    inlikes: 0,
  },
  {
    name: "Fifa 22 PS4",
    tag: "fifa22ps4",
    price: 900,
    inlikes: 0,
  },
  {
    name: "XBox One blck 1TB",
    tag: "xboxoneblck1tb",
    price: 2800,
    inlikes: 0,
  },
  {
    name: "Spiderman PS5",
    tag: "spidermanps5",
    price: 400,
    inlikes: 0,
  },
  {
    name: "Fifa 23 XBox series X",
    tag: "fifa23xboxseriesx",
    price: 1500,
    inlikes: 0,
  },
  {
    name: "Turtlebeach headset",
    tag: "turtlebeachheadset",
    price: 700,
    inlikes: 0,
  },
 
  {
    name: "Couger Chair",
    tag: "cougerchair",
    price: 2200,
    inlikes: 0,
  },
  {
    name: "WWE 2k22 PS4",
    tag: "wwe2k22ps4",
    price: 900,
    inlikes: 0,
  },
  {
    name: "UFC PS4",
    tag: "ufcps4",
    price: 800,
    inlikes: 0,
  },
  {
    name: "Hyper X PS4",
    tag: "hyperxps4",
    price: 900,
    inlikes: 0,
  },
  {
    name: "WWE 2022",
    tag: "wwe2022",
    price: 900,
    inlikes: 0,
  },
  {
    name: "Battlefield",
    tag: "battlefield",
    price: 780,
    inlikes: 0,
  },
  {
    name: "Mouse Black",
    tag: "mouseblack",
    price: 100,
    inlikes: 0,
  },
  {
    name: "San Andreas PS4",
    tag: "sanandreasps4",
    price: 440,
    inlikes: 0,
  },
  {
    name: "X Rocker Pedestal",
    tag: "xrockerpedestal",
    price: 3500,
    inlikes: 0,
  },
  {
    name: "Playstation 4",
    tag: "playstation4",
    price: 2500,
    inlikes: 0,
  },
  {
    name: "GTA V PS4",
    tag: "gtavps4",
    price: 1200,
    inlikes: 0,
  },
  {
    name: "Forza horizon 2",
    tag: "forzahorizon2",
    price: 650,
    inlikes: 0,
  },
  {
    name: "Ingremergonomic",
    tag: "ingremergonomic",
    price: 15000,
    inlikes: 0,
  },
  {
    name: "Assassin's Creed PS5",
    tag: "assassin'screedps5",
    price: 1000,
    inlikes: 0,
  },
  {
    name: "Headset green",
    tag: "headsetgreen",
    price: 700,
    inlikes: 0,
  },
  {
    name: "Wired dual keyboard",
    tag: "wireddualkeyboard",
    price: 400,
    inlikes: 0,
  },
  {
    name: "XBox One Series",
    tag: "xboxoneseries",
    price: 2200,
    inlikes: 0,
  },
  {
    name: "PS5 white",
    tag: "ps5white",
    price: 3800,
    inlikes: 0,
  },
 
  {
    name: "Halo 5 Guardians",
    tag: "halo5Guardians",
    price: 940,
    inlikes: 0,
  },
  {
    name: "Ironman PS4",
    tag: "ironmanps4",
    price: 400,
    inlikes: 0,
  },
  {
    name: "NBA 2K23",
    tag: "nba2k23",
    price: 1000,
    inlikes: 0,
  },
  {
    name: "illuminated led gcx",
    tag: "illuminatedledgcx",
    price: 500,
    inlikes: 0,
  },
  {
    name: "astoria vr headset",
    tag: "astoriavrheadset",
    price: 1000,
    inlikes: 0,
  },
  {
    name: "console stand",
    tag: "consolestand",
    price: 180,
    inlikes: 0,
  },
  {
    name: "ocean shadow",
    tag: "oceanshadow",
    price: 500,
    inlikes: 0,
  },
  {
    name: "logitech g305",
    tag: "logitechg305",
    price: 210,
    inlikes: 0,
  },
  {
    name: "gaming set",
    tag: "gamingset",
    price: 500,
    inlikes: 0,
  },
  {
    name: "ps4 & ps3 wheel",
    tag: "ps4&ps3wheel",
    price: 800,
    inlikes: 0,
  },
  {
    name: "pes 2019",
    tag: "pes2019",
    price: 340,
    inlikes: 0,
  },
  {
    name: "spiderman ps5",
    tag: "spidermanps5",
    price: 700,
    inlikes: 0,
  },
  {
    name: "db fighter z",
    tag: "dbfighterz",
    price: 300,
    inlikes: 0,
  },
  {
    name: "xbox series s 1tb",
    tag: "xboxseriess1tb",
    price: 3800,
    inlikes: 0,
  },
  {
    name: "hitman xbox360",
    tag: "hitmanxbox360",
    price: 280,
    inlikes: 0,
  },
  {
    name: "batterypack charger station",
    tag: "batterypackchargerstation",
    price: 480,
    inlikes: 0,
  },
  {
    name: "fifa19 xbox360",
    tag: "fifa19xbox360",
    price: 250,
    inlikes: 0,
  },
  {
    name: "gta v xbox360",
    tag: "gtavxbox360",
    price: 500,
    inlikes: 0,
  },
  {
    name: "gaming blitz wolf",
    tag: "gamingblitzwolf",
    price: 2800,
    inlikes: 0,
  },
  {
    name: "fifa 23",
    tag: "fifa23",
    price: 1000,
    inlikes: 0,
  },
  {
    name: "wwe 2k23",
    tag: "wwe2k23",
    price: 980,
    inlikes: 0,
  },
  {
    name: "vr ear set",
    tag: "vrearset",
    price: 1800,
    inlikes: 0,
  },
  {
    name: "xbox series x 1tb",
    tag: "xboxseriesx1tb",
    price: 3800,
    inlikes: 0,
  },
  {
    name: "ufc 5 ps5",
    tag: "ufc5ps5",
    price: 800,
    inlikes: 0,
  },
  {
    name: "oy waterproof keyboard",
    tag: "oywaterproofkeyboard",
    price: 1120,
    inlikes: 0,
  },
  {
    name: "resident evil ps5",
    tag: "residentevilps5",
    price: 650,
    inlikes: 0,
  },
  {
    name: "fifa 21 ps4",
    tag: "fifa21ps4",
    price: 500,
    inlikes: 0,
  },

];

let addToFav = document.querySelectorAll(".favorites i");

for (let i = 0; i < addToFav.length; i++) {
  addToFav[i].addEventListener("click", () => {
    favoritesNumbers(items[i]);
  });
}

// NEVER LOSE THE NUMBER COUNT ONCE LOGGED OUT OF WEBSITE
function onLoadfavoritesNumbers() {
  let favoriteNumbers= localStorage.getItem("favoritesNumbers");

  if (favoriteNumbers) {
    document.querySelector(".list-of-liked span").textContent = favoriteNumbers;
  }
}

function favoritesNumbers(item) {
  let favoriteNumbers = localStorage.getItem("favoritesNumbers");

  // CONVERTS THE LIKED ITEMS NUMBER FROM STRING TO A NUMBER........
  favoriteNumbers = parseInt(favoriteNumbers);

  if (favoriteNumbers) {
    // SET THE NUMBER OF FAVORITES ITEMS LIKED INTO THE LOCAL STORAGE
    localStorage.setItem("favoritesNumbers", favoriteNumbers + 1);

    // MAKE THE FAVORITE NUMBER ON NAVBAR EQUAL TO THE STORAGE TOTAL LIKED ITEMS
    document.querySelector(".list-of-liked span").textContent = favoriteNumbers + 1;
  } else {
    localStorage.setItem("favoritesNumbers", 1);
    document.querySelector(".list-of-liked span").textContent = 1;
  }

  setItems(item);
}

function setItems(item) {
  // CONVERTS TO JSON FOR BETTER READABILITY IN LOCAL STORAGE
  let likedItems = localStorage.getItem("productsLiked");
  likedItems= JSON.parse(likedItems);

  if (likedItems != null) {
    if (likedItems[item.tag] == undefined) {
      likedItems = {
        ...likedItems,
        [item.tag]: item,
      };
    }
    likedItems[item.tag].inlikes += 1;
  } else {
    item.inlikes = 1;
    likedItems = {
      [item.tag]: item,
    };
  }
  localStorage.setItem("productsLiked", JSON.stringify(likedItems));
}


function displayFavorites() {
  let likedItems = localStorage.getItem("productsLiked");
  likedItems = JSON.parse(likedItems);
  let itemFavorite = document.querySelector(".Items-list-favorites");

  if (likedItems && itemFavorite) {
    itemFavorite.innerHTML = '';

    Object.values(likedItems).map((item) => {
      itemFavorite.innerHTML += `
              <div class='Box-Fav'>
                  <i class="fa-solid fa-trash"></i>

                    <img src= "./pictures/${item.tag}.jpg">


                    <div class="fav-content">
                    <span>${item.name}</span>
                     <span>R${item.price},00</span>
                     <button type="button" class="add-2-basket"><i class="fa-solid fa-basket-shopping"></i>add to Basket</button>
        
                    </div>
                          


                     </div>

                  </div>
            
            `;
    });
  }
  deleteButtons();

}


function deleteButtons(){

  const deleteBtns= document.querySelectorAll('.Box-Fav i');
  let likedItems = localStorage.getItem("productsLiked");
      likedItems= JSON.parse(likedItems);
  let productNumbers= localStorage.getItem('favoritesNumbers');
  let productName;

  for(let i = 0; i < deleteBtns[i].length; i++){

    deleteBtns[i].addEventListener('click', ()=>{

      // productName= deleteBtns[i].parentElement.textContent.trim().toLowerCase().replace(/ /g, '');


      // delete likedItems[productName];

      // localStorage.setItem('favoritesNumbers', productNumbers-likedItems[productName].inlikes);

      // localStorage.setItem('productsLiked', JSON.stringify(likedItems));

      // displayFavorites();
      // onLoadfavoritesNumbers();
    })

  }


}







onLoadfavoritesNumbers();
displayFavorites();
